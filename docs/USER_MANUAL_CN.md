# FlowTask 全功能使用指南 (Manual v2.3)

FlowTask 是一款专为高上下文切换场景设计的任务管理和生产力工具，特别优化了深度工作（Deep Work）与等待时间（Wait Time）的交替管理，并集成了 GPU 训练任务监控。

## 1. 核心操作逻辑

FlowTask 的核心在于 **Spotlight (快速启动栏)** 和 **Dashboard (主控台)** 的协同工作。

### 快捷键唤醒
*   `Alt + Space`: 唤出 Spotlight 搜索栏。这是所有操作的起点。
    *   *注: 您可以在设置中更改此快捷键。*

### Spotlight 指令语法 (Unified Command Parser)
在 Spotlight 搜索框中，无需记忆复杂的菜单，直接输入指令即可：

| 功能 | 语法示例 | 说明 |
| :--- | :--- | :--- |
| **切换专注 (Focus)** | `[任务名]` | 直接输入任务名。如果任务存在则切换，不存在则创建并切换。 |
| **创建待办 (Enqueue)** | `![任务名]` | 仅创建或搜索任务，但不立即开始专注，放入队列。 |
| **完成任务** | `#[任务名]` | 标记任务完成。如果是新任务或未归档任务，会提示选择项目归档。 |
| **挂起当前任务** | `@25m [备注]` | 将当前专注的任务挂起，并在后台倒计时 25 分钟。备注可选。 |
| **切换并挂起** | `[新任务] @25m` | 开始专注 `[新任务]`，同时将**上一个**任务挂起 25 分钟。 |
| **创建临时任务** | `+[要做的事] @15m` | 创建一个不占项目的 Ad-hoc 任务（如"去拿外卖"），倒计时 15 分钟。 |
| **创建训练任务** | `%[模型名] @2h` | 创建一个后台训练任务并指派 GPU。会弹窗选择 GPU。 |
| **添加到项目** | `[任务] $[项目名]` | 创建任务同时将其归类到指定项目（如 `[Api Fix] $Backend`）。 |
| **记录断点备忘** | `>[内容]` | 给当前正在专注的任务追加一条 Context Memo（例如：`> 查到了Bug在第50行`）。 |
| **创建子任务** | `[子任务名]:` | 将 `[子任务名]` 创建为**当前专注任务**的子任务。 |
| **指派父任务** | `[子任务]:[父索搜]`| 创建子任务，并搜索 `[父搜素]` 的结果作为其父任务。 |

---

## 2. 功能模块详解

### 2.1 主控台 (Main Dashboard)
主界面分为三个区域：
1.  **左侧时间轴 (Timeline)**: 可视化显示您今天的专注记录。每块颜色代表一个专注会话。
2.  **中央工作台 (Workspace)**:
    *   **Context Panel**: 顶部大卡片，显示当前正在专注（Focus）的任务。支持快速编辑备忘。包含 "COMPLETE" 按钮。
    *   **Pending Grid**: 显示正在后台倒计时（Suspended/Waiting）的任务。
    *   **Project Lists (Backlog)**: 下方按项目分组的任务列表。支持拖拽排序和嵌套子任务。
3.  **右侧资源栏 (Resource Panel)**:
    *   **GPU 面板**: 监控 GPU 状态（Busy/Idle）。支持拖拽任务到 GPU 卡片上开始训练。
    *   **Queue**: 训练任务队列和临时任务队列。

### 2.2 提醒系统 (Reminder Window)
当任何倒计时（挂起任务、训练结束、临时事务）结束时，会弹出一个**全屏幕级别的悬浮提醒窗口**。
*   **强制提醒**: 窗口会自动置顶、闪烁，确保您不会错过。
*   **操作**:
    *   `Enter`: 标记为已完成（Complete）。
    *   `+5m` / `+30m`: 延后提醒（Snooze）。
    *   `Continue`: 恢复专注（仅限普通任务）。

### 2.3 持久化浮窗 (Persistence Overlay)
一个半透明的悬浮信息层，始终显示在屏幕最顶层。
*   **目的**: 无论您在使用什么软件，都能一眼看到当前专注的任务和即将到期的后台任务。
*   **交互**:
    *   **穿透模式 (Green)**: 鼠标点击会穿透浮窗，不影响下方操作。
    *   **拖拽模式 (Red)**: 允许鼠标拖动浮窗位置。
    *   在**设置页面**可调节其透明度、字体大小和位置。

### 2.4 GPU 管理
*   **状态监控**: 自动记录 GPU 的忙碌/空闲状态。
*   **空闲报警 (Idle Alert)**: 如果 GPU 空闲超过设定时间（默认 15 分钟），系统会弹出报警，防止算力浪费。
*   **静默时间 (Quiet Hours)**: 可在设置中设定（如 23:00-08:00），在此期间屏蔽空闲报警。

### 2.5 子任务系统 (Nested Tasks)
*   **创建**: 使用 Spotlight 的 `child:parent` 语法或在项目视图中拖拽。
*   **自动流**:
    *   **完成子任务**: 完成 Focus 中的子任务后，焦点会自动切回其父任务。
    *   **级联归档**: 完成父任务会自动归档所有子任务。
    *   **时间累加**: 子任务的专注时长会自动计入父任务的总时长统计。

---

## 3. 设置与个性化 (Settings)
点击主界面右上角的齿轮图标进入设置。

*   **Shortcuts**:
    *   录制新的 Spotlight 唤醒快捷键。
    *   重置回默认 (`Alt+Space`)。
*   **Data & System**:
    *   **Export/Import**: 备份和恢复整个数据库。
    *   **Clear Database**: 清空所有数据（慎用）。
*   **Overlay**:
    *   调节持久化浮窗的外观。
    *   **Reset Position**: 一键将浮窗归位到屏幕中心。
